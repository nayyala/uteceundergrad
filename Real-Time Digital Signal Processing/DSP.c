#include <stdio.h>
#include <math.h>
#include <stdint.h>

#define FREQ_D 25000
#define N 9
#define B_SIZE 257

float B[B_SIZE] = {
-6.06093e-05,	/* B[0] */
 0.000237645,	/* B[1] */
 8.13476e-05,	/* B[2] */
-0.000122729,	/* B[3] */
-3.87122e-05,	/* B[4] */
 0.000172099,	/* B[5] */
 2.60279e-05,	/* B[6] */
-0.000216794,	/* B[7] */
-4.24345e-07,	/* B[8] */
 0.000265226,	/* B[9] */
 -3.7716e-05,	/* B[10] */
-0.000314827,	/* B[11] */
 9.04168e-05,	/* B[12] */
 0.000363023,	/* B[13] */
-0.000159181,	/* B[14] */
-0.000406694,	/* B[15] */
 0.000245107,	/* B[16] */
 0.000442112,	/* B[17] */
-0.000348652,	/* B[18] */
-0.000465157,	/* B[19] */
 0.000469604,	/* B[20] */
 0.000471305,	/* B[21] */
-0.000606755,	/* B[22] */
-0.000455871,	/* B[23] */
 0.000757967,	/* B[24] */
 0.000414132,	/* B[25] */
-0.000919972,	/* B[26] */
-0.000341668,	/* B[27] */
  0.00108845,	/* B[28] */
 0.000234389,	/* B[29] */
 -0.00125794,	/* B[30] */
-8.89556e-05,	/* B[31] */
  0.00142193,	/* B[32] */
-9.71748e-05,	/* B[33] */
 -0.00157294,	/* B[34] */
 0.000325224,	/* B[35] */
  0.00170267,	/* B[36] */
-0.000595083,	/* B[37] */
 -0.00180228,	/* B[38] */
 0.000904941,	/* B[39] */
  0.00186266,	/* B[40] */
 -0.00125137,	/* B[41] */
 -0.00187464,	/* B[42] */
  0.00162897,	/* B[43] */
  0.00182931,	/* B[44] */
  -0.0020304,	/* B[45] */
 -0.00171857,	/* B[46] */
  0.00244635,	/* B[47] */
  0.00153555,	/* B[48] */
 -0.00286596,	/* B[49] */
 -0.00127479,	/* B[50] */
  0.00327663,	/* B[51] */
 0.000932594,	/* B[52] */
 -0.00366413,	/* B[53] */
-0.000507929,	/* B[54] */
  0.00401373,	/* B[55] */
 1.78979e-06,	/* B[56] */
 -0.00430964,	/* B[57] */
 0.000581699,	/* B[58] */
  0.00453621,	/* B[59] */
 -0.00123562,	/* B[60] */
 -0.00467815,	/* B[61] */
  0.00195006,	/* B[62] */
   0.0047211,	/* B[63] */
 -0.00271206,	/* B[64] */
 -0.00465223,	/* B[65] */
  0.00350601,	/* B[66] */
  0.00446081,	/* B[67] */
 -0.00431364,	/* B[68] */
 -0.00413878,	/* B[69] */
  0.00511467,	/* B[70] */
  0.00368129,	/* B[71] */
 -0.00588691,	/* B[72] */
 -0.00308693,	/* B[73] */
  0.00660722,	/* B[74] */
  0.00235816,	/* B[75] */
 -0.00725196,	/* B[76] */
  -0.0015016,	/* B[77] */
   0.0077978,	/* B[78] */
 0.000528098,	/* B[79] */
 -0.00822225,	/* B[80] */
 0.000547362,	/* B[81] */
  0.00850465,	/* B[82] */
 -0.00170599,	/* B[83] */
 -0.00862697,	/* B[84] */
  0.00292515,	/* B[85] */
  0.00857431,	/* B[86] */
 -0.00417904,	/* B[87] */
 -0.00833547,	/* B[88] */
  0.00543941,	/* B[89] */
  0.00790405,	/* B[90] */
 -0.00667608,	/* B[91] */
 -0.00727831,	/* B[92] */
  0.00785763,	/* B[93] */
  0.00646153,	/* B[94] */
 -0.00895284,	/* B[95] */
 -0.00546271,	/* B[96] */
   0.0099307,	/* B[97] */
  0.00429571,	/* B[98] */
  -0.0107624,	/* B[99] */
 -0.00297986,	/* B[100] */
   0.0114213,	/* B[101] */
  0.00153899,	/* B[102] */
  -0.0118845,	/* B[103] */
-1.38131e-06,	/* B[104] */
   0.0121332,	/* B[105] */
 -0.00160127,	/* B[106] */
  -0.0121537,	/* B[107] */
  0.00323437,	/* B[108] */
   0.0119375,	/* B[109] */
 -0.00486156,	/* B[110] */
  -0.0114823,	/* B[111] */
  0.00644556,	/* B[112] */
   0.0107917,	/* B[113] */
 -0.00794923,	/* B[114] */
 -0.00987568,	/* B[115] */
  0.00933673,	/* B[116] */
  0.00874988,	/* B[117] */
  -0.0105745,	/* B[118] */
 -0.00743585,	/* B[119] */
   0.0116321,	/* B[120] */
  0.00596013,	/* B[121] */
  -0.0124834,	/* B[122] */
 -0.00435379,	/* B[123] */
   0.0131072,	/* B[124] */
  0.00265144,	/* B[125] */
  -0.0134879,	/* B[126] */
-0.000890399,	/* B[127] */
   0.0136159,	/* B[128] */
-0.000890399,	/* B[129] */
  -0.0134879,	/* B[130] */
  0.00265144,	/* B[131] */
   0.0131072,	/* B[132] */
 -0.00435379,	/* B[133] */
  -0.0124834,	/* B[134] */
  0.00596013,	/* B[135] */
   0.0116321,	/* B[136] */
 -0.00743585,	/* B[137] */
  -0.0105745,	/* B[138] */
  0.00874988,	/* B[139] */
  0.00933673,	/* B[140] */
 -0.00987568,	/* B[141] */
 -0.00794923,	/* B[142] */
   0.0107917,	/* B[143] */
  0.00644556,	/* B[144] */
  -0.0114823,	/* B[145] */
 -0.00486156,	/* B[146] */
   0.0119375,	/* B[147] */
  0.00323437,	/* B[148] */
  -0.0121537,	/* B[149] */
 -0.00160127,	/* B[150] */
   0.0121332,	/* B[151] */
-1.38131e-06,	/* B[152] */
  -0.0118845,	/* B[153] */
  0.00153899,	/* B[154] */
   0.0114213,	/* B[155] */
 -0.00297986,	/* B[156] */
  -0.0107624,	/* B[157] */
  0.00429571,	/* B[158] */
   0.0099307,	/* B[159] */
 -0.00546271,	/* B[160] */
 -0.00895284,	/* B[161] */
  0.00646153,	/* B[162] */
  0.00785763,	/* B[163] */
 -0.00727831,	/* B[164] */
 -0.00667608,	/* B[165] */
  0.00790405,	/* B[166] */
  0.00543941,	/* B[167] */
 -0.00833547,	/* B[168] */
 -0.00417904,	/* B[169] */
  0.00857431,	/* B[170] */
  0.00292515,	/* B[171] */
 -0.00862697,	/* B[172] */
 -0.00170599,	/* B[173] */
  0.00850465,	/* B[174] */
 0.000547362,	/* B[175] */
 -0.00822225,	/* B[176] */
 0.000528098,	/* B[177] */
   0.0077978,	/* B[178] */
  -0.0015016,	/* B[179] */
 -0.00725196,	/* B[180] */
  0.00235816,	/* B[181] */
  0.00660722,	/* B[182] */
 -0.00308693,	/* B[183] */
 -0.00588691,	/* B[184] */
  0.00368129,	/* B[185] */
  0.00511467,	/* B[186] */
 -0.00413878,	/* B[187] */
 -0.00431364,	/* B[188] */
  0.00446081,	/* B[189] */
  0.00350601,	/* B[190] */
 -0.00465223,	/* B[191] */
 -0.00271206,	/* B[192] */
   0.0047211,	/* B[193] */
  0.00195006,	/* B[194] */
 -0.00467815,	/* B[195] */
 -0.00123562,	/* B[196] */
  0.00453621,	/* B[197] */
 0.000581699,	/* B[198] */
 -0.00430964,	/* B[199] */
 1.78979e-06,	/* B[200] */
  0.00401373,	/* B[201] */
-0.000507929,	/* B[202] */
 -0.00366413,	/* B[203] */
 0.000932594,	/* B[204] */
  0.00327663,	/* B[205] */
 -0.00127479,	/* B[206] */
 -0.00286596,	/* B[207] */
  0.00153555,	/* B[208] */
  0.00244635,	/* B[209] */
 -0.00171857,	/* B[210] */
  -0.0020304,	/* B[211] */
  0.00182931,	/* B[212] */
  0.00162897,	/* B[213] */
 -0.00187464,	/* B[214] */
 -0.00125137,	/* B[215] */
  0.00186266,	/* B[216] */
 0.000904941,	/* B[217] */
 -0.00180228,	/* B[218] */
-0.000595083,	/* B[219] */
  0.00170267,	/* B[220] */
 0.000325224,	/* B[221] */
 -0.00157294,	/* B[222] */
-9.71748e-05,	/* B[223] */
  0.00142193,	/* B[224] */
-8.89556e-05,	/* B[225] */
 -0.00125794,	/* B[226] */
 0.000234389,	/* B[227] */
  0.00108845,	/* B[228] */
-0.000341668,	/* B[229] */
-0.000919972,	/* B[230] */
 0.000414132,	/* B[231] */
 0.000757967,	/* B[232] */
-0.000455871,	/* B[233] */
-0.000606755,	/* B[234] */
 0.000471305,	/* B[235] */
 0.000469604,	/* B[236] */
-0.000465157,	/* B[237] */
-0.000348652,	/* B[238] */
 0.000442112,	/* B[239] */
 0.000245107,	/* B[240] */
-0.000406694,	/* B[241] */
-0.000159181,	/* B[242] */
 0.000363023,	/* B[243] */
 9.04168e-05,	/* B[244] */
-0.000314827,	/* B[245] */
 -3.7716e-05,	/* B[246] */
 0.000265226,	/* B[247] */
-4.24345e-07,	/* B[248] */
-0.000216794,	/* B[249] */
 2.60279e-05,	/* B[250] */
 0.000172099,	/* B[251] */
-3.87122e-05,	/* B[252] */
-0.000122729,	/* B[253] */
 8.13476e-05,	/* B[254] */
 0.000237645,	/* B[255] */
-6.06093e-05,	/* B[256] */
};



float FIR[B_SIZE]= {0};
float x[B_SIZE] = {0};
int j = 0;
int k = 0;
float max = 0;

volatile union{
	int val;
	short Channel[2];
}DataIn, DataOut;

void maxSig(float array[], int arrayLength, float* num){
	int i = 0;
	float temp = 0;
	for(i = 0; i<arrayLength; i++){
		float temp = array[i];
		if (temp < 0){
			temp*=-1;
		}
		if (temp > *num){
			*num = temp;
		}

	}


}
int main(void){
	// FIR Bandpass Convolution
	scanf("%d", &k);
	do{
		// input from volatile union
		float input = 30*cos(2*M_PI*25000*j) + 5*cos(2*M_PI*(rand()%37000)*j);
		x[0] = input;

		int i;
		float output = 0;

		for(i = 0; i < B_SIZE; i++){
			output += B[i]*x[i];
		}

		FIR[0] = output;

		//Bluetooth Output to DataOut
		maxSig(FIR, B_SIZE, &max);

		printf("%f\n", max*100);

		for(i = B_SIZE - 1; i>0; i--){
			FIR[i] = FIR[i-1];
			x[i] = x[i-1];
		}


	j++;
	}while(j < k);

}
























